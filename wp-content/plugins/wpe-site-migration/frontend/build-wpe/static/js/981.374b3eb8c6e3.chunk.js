"use strict";(self.webpackJSONPwpmdb=self.webpackJSONPwpmdb||[]).push([[981],{6981:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var n,l=a(9764),i=a(9255),r=a(6508),s=a.n(r),d=a(7081),o=a(6484),m=a(3963),c=a(8346),p=a.n(c),u=a(8016),_=a.n(u),w=a(6500),b=a(3690),f=a(583),v=(a(5965),a(4642)),g=a(8349),E=a(3048),h=a(1581),y=a(1065),N=a(6487),O=a(9496),M=a(2774),k=a(5482),x=a(3713),A=a.n(x),D=(a(8014),a(536));function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},P.apply(null,arguments)}const C=e=>i.createElement("svg",P({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=i.createElement("path",{d:"M13.444 2.5H2.556C1.696 2.5 1 3.122 1 3.889v9.722C1 14.378 1.696 15 2.556 15h10.888c.86 0 1.556-.622 1.556-1.389V3.89c0-.767-.696-1.389-1.556-1.389ZM11 1v3M5 1v3M1 8h14",stroke:"#B3B3B3",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})));a.p;const T=(0,d.Ng)((e=>({media_files:e.media_files})),{updateMFDate:b.xB})((e=>{var t=e.media_files.date,a=(0,i.useState)(!1),n=(0,O.A)(a,2),l=n[0],r=n[1],s=(0,i.useRef)(null),d=e=>{s.current.contains(e.target)||setTimeout((()=>{r(!1)}),50)};(0,i.useEffect)((()=>(l?document.addEventListener("mousedown",d):document.removeEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)})),[l]);var m=(0,M.pn)(l,null,{from:{opacity:0,marginTop:-25},enter:{opacity:1,marginTop:0},leave:{opacity:0,marginTop:-25}});return t&&""!==t||(t=Date.now()),i.createElement("div",{className:"datepicker-wrap",ref:s},i.createElement("div",null,i.createElement("div",{tabIndex:"0",onClick:()=>{r(!0)},onKeyPress:e=>{"Enter"===e.key&&r(!0)},className:"media-date"},i.createElement(C,null),i.createElement("span",null,t?_()(t,"mmmm d yyyy @ hh:MM TT"):""))),m.map((a=>{var n=a.item,s=a.key,d=a.props;return n&&i.createElement(A(),{active:l},i.createElement(M.CS.div,{key:s,style:d,className:"datepicker-box"},i.createElement(k.Ay,{currentDate:t||Date.now(),tabIndex:"0",onChange:t=>{e.updateMFDate(t)},is12Hour:!0,isInvalidDate:e=>{var t=new Date;return e.setHours(0,0,0,0),t.setHours(0,0,0,0),e>=new Date}}),i.createElement("div",{className:"close-wrap"},i.createElement("button",{onClick:()=>{r(!1)},className:"close-picker"},i.createElement(D.h,{"aria-hidden":!0}),i.createElement("span",{className:"screen-reader-text"},(0,o.__)("Close Date Picker","wp-migrate-db"))))))})))}));var F=a(4829),L=a(8047),S={pull:(0,o.__)("Pull","wp-migrate-db"),push:(0,o.__)("Push","wp-migrate-db"),savefile:(0,o.__)("Export","wp-migrate-db")},I=e=>{var t=e.selected,a=e.labelledby;return i.createElement("div",null,i.createElement("input",{className:"media-option-radio",type:"radio",name:"media-option",checked:t,"aria-labelledby":a,readOnly:!0}))},B=e=>{var t=e.description,a=e.currentOption,n=e.intent,l=e.optionName,r=e.postDescription,s=e.className,m=e.label,c=(0,d.wA)(),p="media-".concat(l);return i.createElement("div",{onClick:()=>{(t=>{if(a===t)return null;c(e.setMediaOption(t))})(l)},className:"media-option ".concat(s||"")},i.createElement(I,{labelledby:p,selected:l===a}),i.createElement("div",null,i.createElement("strong",{id:p},(0,o.nv)(m,S[n])),i.createElement("div",{className:"option-description"},t),i.createElement("div",null,i.createElement("b",null,r))),i.createElement("div",{className:"datepicker-container"},"new"===l&&"new"===a&&i.createElement(T,null)))};const q=(0,d.Ng)((e=>{var t=e.profiles.profile_loading,a=(0,v.o)("panelsOpen",e),n=(0,h.ud)("status",e),l=e.profiles.loaded_profile;return{isLoading:t,panel_info:e.panels,migration:e.migrations,current_migration:e.migrations.current_migration,addons:e.addons,media_files:e.media_files,status:n,panelsOpen:a,loaded_profile:l}}),{toggleMediaFiles:b.SJ,setMediaOption:b.Ke,togglePanelsOpen:f.SZ,addOpenPanel:f._t,removeOpenPanel:f.Tz,updateMFExcludes:b.kn,updateMFDate:b.xB})((e=>{var t=e.media_files,a=e.panelsOpen,n=e.status,r=e.migration,c=r.current_migration,u=r.local_site,f=c.intent,v=c.twoMultisites,h=c.localSource,O=t.enabled,M=(0,d.wA)(),k="undefined"!==typeof t.available&&!t.available,x=p()(n,{name:"MF_INVALID_DATE"}),A=p()(n,{name:"MF_OPTION_NULL"}),D=(0,d.d4)((e=>e.multisite_tools)),P={all:(0,o.__)("%s all media uploads","wp-migrate-db"),new:(0,o.__)("%s media uploads by date","wp-migrate-db"),new_subsequent:(0,o.__)("%s new and updated media uploads","wp-migrate-db")},C={all:D.enabled?(()=>{var e=h&&"false"===u.is_multisite||!h&&"true"===u.is_multisite;return!v&&e?(0,o.__)("Copies all files to the uploads folder of the subsite","wp-migrate-db"):(0,o.__)("Copies all files from the uploads folder of the subsite","wp-migrate-db")})():(0,o.__)("Copies all files from the uploads folder","wp-migrate-db"),new:(0,o.__)("Copies new and modified files after a specific date","wp-migrate-db"),new_subsequent:(0,o.__)("Copies new and modified files since the last migration","wp-migrate-db")},T=e=>!s()(a,"media_files")&&t.option&&t.enabled?i.createElement(i.Fragment,null,(0,o.nv)(P[t.option],S[f])):null,I=a.includes("media_files"),q=!1;O&&!I&&(q=!0);var J=[];return q&&J.push("has-divider"),O&&J.push("enabled"),i.createElement("div",{className:"media-files"},i.createElement(w.A,{title:(0,o.__)("Media Uploads","wp-migrate-db"),className:J.join(" "),panelName:"media_files",disabled:k,enabled:O,panelSummary:i.createElement(T,(0,l.A)({disabled:k,labels:P},e)),forceDivider:q,callback:t=>(0,E.Qi)(t,"media_files",I,O,k,e.addOpenPanel,e.removeOpenPanel,(()=>M((0,N.b)(y.yX)))),toggle:(0,b.SJ)(),hasInput:!0},i.createElement("div",{className:"media-files-inner-wrap"},i.createElement("div",{className:"media-files-options"},i.createElement(B,{description:C.all,label:P.all,currentOption:t.option,optionName:"all",intent:f,setMediaOption:b.Ke}),!(0,L.Al)()&&i.createElement(B,{description:C.new_subsequent,label:P.new_subsequent,postDescription:t.last_migration&&""!==t.last_migration?_()(t.last_migration,"(mmmm d yyyy @ hh:MM TT)"):"",currentOption:t.option,optionName:"new_subsequent",intent:f,setMediaOption:b.Ke}),i.createElement(B,{description:C.new,label:P.new,currentOption:t.option,optionName:"new",intent:f,setMediaOption:b.Ke,className:"option-wrap"})),i.createElement("div",{className:"media-files-excludes excludes-wrap excludes-wrap-full"},i.createElement(g.A,(0,l.A)({},e,{excludes:t.excludes,excludesUpdater:e.updateMFExcludes,type:"media"})))),x&&i.createElement(F.A,{type:"danger"},(0,m.Ay)((0,o.__)('The date selected <a href="https://www.youtube.com/watch?v=G3AfIvJBcGo" target="_blank" rel="noopener noreferrer">is in the future</a>, please select a valid date.',"wp-migrate-db"))),A&&i.createElement(F.A,{type:"danger"},(0,m.Ay)((0,o.__)("Please select a media option above.","wp-migrate-db")))))}))}}]);