{"version":3,"file":"frontend.js","mappings":"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","sources":["webpack://gutenberghub-query-taxonomy/./packages/frontend/src/query-by-taxonomy.js","webpack://gutenberghub-query-taxonomy/./packages/frontend/src/utils.js","webpack://gutenberghub-query-taxonomy/webpack/bootstrap","webpack://gutenberghub-query-taxonomy/webpack/runtime/define property getters","webpack://gutenberghub-query-taxonomy/webpack/runtime/hasOwnProperty shorthand","webpack://gutenberghub-query-taxonomy/webpack/runtime/make namespace object","webpack://gutenberghub-query-taxonomy/./packages/frontend/src/index.js"],"sourcesContent":["import { ctbParseQueryId } from './utils';\r\nconst $ = jQuery;\r\nclass GutenberghubQueryByTaxonomy {\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {HTMLDivElement} queryContainer - Query loop container.\r\n\t * @param {HTMLDivElement} container - Block container.\r\n\t * @param {number} queryContainerIndex - Query Container Index.\r\n\t */\r\n\tconstructor( queryContainer, container, queryContainerIndex ) {\r\n\t\tthis.queryContainer = queryContainer;\r\n\t\tthis.container = container;\r\n\t\tthis.queryContainerIndex = queryContainerIndex;\r\n\t\tthis.postTemplate = $( this.queryContainer ).find(\r\n\t\t\t'.wp-block-post-template'\r\n\t\t);\r\n\t\tthis.loadMoreButton = $( this.queryContainer ).find(\r\n\t\t\t'.ghub-query-load-more'\r\n\t\t);\r\n\t\tthis.resultCount = $( this.queryContainer ).find(\r\n\t\t\t'.gutenberghub-query-result-count'\r\n\t\t);\r\n\t\t/**\r\n\t\t * Query Identity.\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t */\r\n\t\tthis.queryId = ctbParseQueryId( this.queryContainer );\r\n\r\n\t\t/**\r\n\t\t * All relevant query elements from different layouts.\r\n\t\t *\r\n\t\t * @type {{\r\n\t\t *  selectbox?: HTMLSelectElement | null | undefined;\r\n\t\t *  checkboxesContainer: HTMLDivElement | null | undefined;\r\n\t\t * }}\r\n\t\t */\r\n\t\tthis.queryElements = {\r\n\t\t\t/**\r\n\t\t\t * Radio Container.\r\n\t\t\t */\r\n\t\t\tradiosContainer: this?.container?.querySelector(\r\n\t\t\t\t':scope > .gutenberghub-query-taxonomy-radio'\r\n\t\t\t),\r\n\r\n\t\t\t/**\r\n\t\t\t * Selectbox Container.\r\n\t\t\t */\r\n\t\t\tselectbox: this?.container?.querySelector( ':scope select' ),\r\n\r\n\t\t\t/**\r\n\t\t\t * Selectbox Container.\r\n\t\t\t */\r\n\t\t\tcheckboxesContainer: this?.container?.querySelector(\r\n\t\t\t\t':scope > .gutenberghub-query-taxonomy-checkbox'\r\n\t\t\t),\r\n\t\t\t/**\r\n\t\t\t * Menu Container\r\n\t\t\t */\r\n\t\t\tmenusContainer: this?.container?.querySelector(\r\n\t\t\t\t':scope > .gutenberghub-query-taxonomy-menu'\r\n\t\t\t),\r\n\t\t};\r\n\r\n\t\tif ( this.queryElements.selectbox ) {\r\n\t\t\tthis.initializeSelectbox();\r\n\t\t}\r\n\t\tif ( this.queryElements.checkboxesContainer ) {\r\n\t\t\tthis.initializeCheckbox();\r\n\t\t}\r\n\t\tif ( this.queryElements.radiosContainer ) {\r\n\t\t\tthis.initializeRadio();\r\n\t\t}\r\n\t\tif ( this.queryElements.menusContainer ) {\r\n\t\t\tthis.initializeMenu();\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Handles the load more visibility.\r\n\t *\r\n\t * @param {HTMLElement} newPostWrapper Next page query loop instance\r\n\t */\r\n\thandleLoadMoreButton( newPostWrapper ) {\r\n\t\tif ( this.loadMoreButton.get( 0 ) === undefined ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst newLoadMoreButton = $( newPostWrapper ).find(\r\n\t\t\t'.ghub-query-load-more'\r\n\t\t);\r\n\t\tconst newLoadMoreTotalPages = newLoadMoreButton.data( 'totalpages' );\r\n\t\tthis.loadMoreButton.attr( 'data-totalpages', newLoadMoreTotalPages );\r\n\t\tnewLoadMoreTotalPages === 1 || newLoadMoreTotalPages === 0\r\n\t\t\t? this.loadMoreButton.css( 'display', 'none' )\r\n\t\t\t: this.loadMoreButton.css( 'display', 'flex' );\r\n\t}\r\n\t/**\r\n\t * Handles the result count.\r\n\t *\r\n\t * @param {HTMLElement} newPostWrapper Next page query loop instance\r\n\t */\r\n\thandleResultCount( newPostWrapper ) {\r\n\t\tif ( this.resultCount.get( 0 ) === undefined ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst newResultCount = $( newPostWrapper ).find(\r\n\t\t\t'.gutenberghub-query-result-count'\r\n\t\t);\r\n\t\tthis.resultCount.replaceWith( newResultCount );\r\n\t\tthis.resultCount = newResultCount;\r\n\t}\r\n\t/**\r\n\t * Loads the taxonomy query.\r\n\t *\r\n\t * @param {{\r\n\t *  taxonomy: string;\r\n\t *  term: string;\r\n\t * }} query\r\n\t * @param {string[]|false} include Include just the given terms.\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tloadQuery( query, include = false ) {\r\n\t\tconst url = new URL( location.href );\r\n\r\n\t\tlet hasTerms =\r\n\t\t\turl.searchParams.has( query.taxonomy ) &&\r\n\t\t\turl.searchParams.get( query.taxonomy ) !== '';\r\n\t\tlet terms = hasTerms\r\n\t\t\t? url.searchParams.get( query.taxonomy )?.split( ',' )\r\n\t\t\t: [];\r\n\r\n\t\tif ( Array.isArray( include ) ) {\r\n\t\t\tterms = [ ...terms, query.term ];\r\n\t\t\tterms = terms.filter( ( term ) => include.includes( term ) );\r\n\t\t\tterms = [ ...new Set( terms ) ];\r\n\t\t\turl.searchParams.set( query.taxonomy, terms.join( ',' ) );\r\n\t\t} else {\r\n\t\t\turl.searchParams.set( query.taxonomy, query.term );\r\n\t\t}\r\n\t\turl.searchParams.set( 'qid', this.queryId.toString() );\r\n\r\n\t\tconst self = this;\r\n\r\n\t\t$.ajax( {\r\n\t\t\turl: url.href,\r\n\t\t\tsuccess: function ( response ) {\r\n\t\t\t\tconst responseDocument = $( $.parseHTML( response ) );\r\n\t\t\t\tconst newPostWrapper = responseDocument.find(\r\n\t\t\t\t\t`.wp-block-query`\r\n\t\t\t\t)[ self.queryContainerIndex ];\r\n\r\n\t\t\t\tconst newPosts = $( newPostWrapper ).find(\r\n\t\t\t\t\t`.wp-block-post-template .wp-block-post`\r\n\t\t\t\t);\r\n\r\n\t\t\t\tself.handleLoadMoreButton( newPostWrapper );\r\n\t\t\t\tself.handleResultCount( newPostWrapper );\r\n\t\t\t\tself.postTemplate.html( newPosts );\r\n\t\t\t},\r\n\t\t} );\r\n\t\twindow.history.pushState( {}, '', decodeURIComponent( url ) );\r\n\t}\r\n\r\n\t/**\r\n\t * Removes the taxonomy query.\r\n\t *\r\n\t * @param {string} taxonomy - Taxonomy name.\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tremoveQuery( taxonomy ) {\r\n\t\tconst url = new URL( location.href );\r\n\t\turl.searchParams.delete( taxonomy );\r\n\t\tconst self = this;\r\n\r\n\t\t$.ajax( {\r\n\t\t\turl: url.href,\r\n\t\t\tsuccess: function ( response ) {\r\n\t\t\t\tconst responseDocument = $( $.parseHTML( response ) );\r\n\t\t\t\tconst newPostWrapper = responseDocument.find(\r\n\t\t\t\t\t`.wp-block-query`\r\n\t\t\t\t)[ self.queryContainerIndex ];\r\n\r\n\t\t\t\tconst newPosts = $( newPostWrapper ).find(\r\n\t\t\t\t\t`.wp-block-post-template .wp-block-post`\r\n\t\t\t\t);\r\n\r\n\t\t\t\tself.handleLoadMoreButton( newPostWrapper );\r\n\t\t\t\tself.handleResultCount( newPostWrapper );\r\n\t\t\t\tself.postTemplate.html( newPosts );\r\n\t\t\t},\r\n\t\t} );\r\n\t\twindow.history.pushState( {}, '', decodeURIComponent( url ) );\r\n\t}\r\n\tactiveTaxonomyTaxonomy( taxonomy ) {\r\n\t\tconst url = new URL( location.href );\r\n\r\n\t\treturn url.searchParams.get( taxonomy ) ?? '';\r\n\t}\r\n\t/**\r\n\t * Initializes the selectbox filter.\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tinitializeSelectbox() {\r\n\t\tconst url = new URL( location.href );\r\n\t\tif ( Number( url.searchParams.get( 'qid' ) ) === this.queryId ) {\r\n\t\t\tthis.queryElements.selectbox.value = this.activeTaxonomyTaxonomy(\r\n\t\t\t\tthis.queryElements.selectbox.name\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tthis.queryElements.selectbox?.addEventListener( 'change', ( event ) => {\r\n\t\t\tif ( event.target.value !== '' ) {\r\n\t\t\t\tthis.loadQuery( {\r\n\t\t\t\t\ttaxonomy: event.target?.name,\r\n\t\t\t\t\tterm: event.target?.value,\r\n\t\t\t\t} );\r\n\t\t\t} else {\r\n\t\t\t\tthis.removeQuery( event.target?.name );\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n\t/**\r\n\t * Initializes the menu filter.\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tinitializeMenu() {\r\n\t\tconst { menusContainer } = this.queryElements;\r\n\r\n\t\tconst taxonomySlug = menusContainer?.dataset[ 'tax' ];\r\n\r\n\t\tconst menus = menusContainer?.querySelectorAll( '.wp-element-button' );\r\n\r\n\t\tmenus?.forEach( ( menu ) => {\r\n\t\t\tmenu.addEventListener( 'click', ( event ) => {\r\n\t\t\t\tmenus.forEach( ( m ) =>\r\n\t\t\t\t\tm.classList.remove( 'is-active-menu' )\r\n\t\t\t\t);\r\n\t\t\t\tmenu.classList.add( 'is-active-menu' );\r\n\r\n\t\t\t\tconst filterValue = menu.dataset.filter_value;\r\n\t\t\t\tif ( filterValue !== '' ) {\r\n\t\t\t\t\tthis.loadQuery( {\r\n\t\t\t\t\t\ttaxonomy: taxonomySlug,\r\n\t\t\t\t\t\tterm: filterValue,\r\n\t\t\t\t\t} );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.removeQuery( taxonomySlug );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} );\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes the radio filter.\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tinitializeRadio() {\r\n\t\tconst { radiosContainer } = this.queryElements;\r\n\r\n\t\tconst taxonomySlug = radiosContainer?.dataset[ 'tax' ];\r\n\t\tconst radios = radiosContainer?.querySelectorAll(\r\n\t\t\t'input[type=\"radio\"]'\r\n\t\t);\r\n\t\tconst url = new URL( location.href );\r\n\r\n\t\tradios?.forEach( ( radio ) => {\r\n\t\t\tif (\r\n\t\t\t\tradio.value === this.activeTaxonomyTaxonomy( taxonomySlug ) &&\r\n\t\t\t\tNumber( url.searchParams.get( 'qid' ) ) === this.queryId\r\n\t\t\t) {\r\n\t\t\t\tradio.checked = true;\r\n\t\t\t} else {\r\n\t\t\t\tradio.checked = false;\r\n\t\t\t}\r\n\t\t\tradio.addEventListener( 'change', ( event ) => {\r\n\t\t\t\tconst includedTerms = Array.from( radios )\r\n\t\t\t\t\t.filter( ( radio ) => {\r\n\t\t\t\t\t\tif ( radio.name === event.target.value ) {\r\n\t\t\t\t\t\t\treturn event.target.checked;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn radio.checked;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} )\r\n\t\t\t\t\t.map( ( radio ) => radio.value );\r\n\t\t\t\tif ( includedTerms.length > 0 && event.target.value !== '' ) {\r\n\t\t\t\t\tthis.loadQuery(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttaxonomy: taxonomySlug,\r\n\t\t\t\t\t\t\tterm: event.target.value,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tincludedTerms\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.removeQuery( taxonomySlug );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} );\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes the checkbox filter.\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tinitializeCheckbox() {\r\n\t\tconst { checkboxesContainer } = this.queryElements;\r\n\r\n\t\tconst taxonomySlug = checkboxesContainer?.dataset[ 'tax' ];\r\n\t\tconst checkboxes = checkboxesContainer?.querySelectorAll(\r\n\t\t\t'input[type=\"checkbox\"]'\r\n\t\t);\r\n\t\tconst url = new URL( location.href );\r\n\r\n\t\tcheckboxes?.forEach( ( checkbox ) => {\r\n\t\t\tconst currentActiveTaxonomy = this.activeTaxonomyTaxonomy(\r\n\t\t\t\ttaxonomySlug\r\n\t\t\t)\r\n\t\t\t\t.split( ',' )\r\n\t\t\t\t.find( ( tax ) => tax === checkbox.value );\r\n\r\n\t\t\tif (\r\n\t\t\t\tcurrentActiveTaxonomy &&\r\n\t\t\t\tNumber( url.searchParams.get( 'qid' ) ) === this.queryId\r\n\t\t\t) {\r\n\t\t\t\tcheckbox.checked = true;\r\n\t\t\t} else {\r\n\t\t\t\tcheckbox.checked = false;\r\n\t\t\t}\r\n\t\t\tcheckbox.addEventListener( 'change', ( event ) => {\r\n\t\t\t\tconst includedTerms = Array.from( checkboxes )\r\n\t\t\t\t\t.filter( ( checkbox ) => {\r\n\t\t\t\t\t\tif ( checkbox.name === event.target.value ) {\r\n\t\t\t\t\t\t\treturn event.target.checked;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn checkbox.checked;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} )\r\n\t\t\t\t\t.map( ( checkbox ) => checkbox.value );\r\n\r\n\t\t\t\tif ( includedTerms.length > 0 ) {\r\n\t\t\t\t\tthis.loadQuery(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttaxonomy: taxonomySlug,\r\n\t\t\t\t\t\t\tterm: event.target.value,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tincludedTerms\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.removeQuery( taxonomySlug );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} );\r\n\t}\r\n}\r\n\r\nwindow.addEventListener( 'load', () => {\r\n\t/**\r\n\t * @type {NodeListOf<HTMLDivElement>} Loop Blocks.\r\n\t */\r\n\tconst ctbQueryLoopBlocks = document.querySelectorAll( '.wp-block-query' );\r\n\r\n\tctbQueryLoopBlocks.forEach( ( queryLoopBlock, queryContainerIndex ) => {\r\n\t\tqueryLoopBlock\r\n\t\t\t.querySelectorAll( ':scope .gutenberghub-query-taxonomy' )\r\n\t\t\t.forEach( ( container ) => {\r\n\t\t\t\tnew GutenberghubQueryByTaxonomy(\r\n\t\t\t\t\tqueryLoopBlock,\r\n\t\t\t\t\tcontainer,\r\n\t\t\t\t\tqueryContainerIndex\r\n\t\t\t\t);\r\n\t\t\t} );\r\n\t} );\r\n} );\r\n","/**\r\n * Parses the gutenberghub query id from the query loop instance.\r\n *\r\n * @param {HTMLDivElement|null} queryLoopInstance - Query loop instance.\r\n * @return {number} - Query id if found, otherwise -1.\r\n */\r\nexport function ctbParseQueryId(queryLoopInstance) {\r\n\tif (!queryLoopInstance) {\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tconst classList = Array.from(queryLoopInstance.classList);\r\n\tconst queryClass = classList.find((className) =>\r\n\t\tclassName.startsWith('ghub-query-id-')\r\n\t);\r\n\r\n\tif (!queryClass) {\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tconst classTokens = queryClass.split('-');\r\n\r\n\treturn Number(classTokens[classTokens.length - 1]);\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './query-by-taxonomy';"],"names":["ctbParseQueryId","$","jQuery","GutenberghubQueryByTaxonomy","constructor","queryContainer","container","queryContainerIndex","postTemplate","find","loadMoreButton","resultCount","queryId","queryElements","radiosContainer","querySelector","selectbox","checkboxesContainer","menusContainer","initializeSelectbox","initializeCheckbox","initializeRadio","initializeMenu","handleLoadMoreButton","newPostWrapper","get","undefined","newLoadMoreButton","newLoadMoreTotalPages","data","attr","css","handleResultCount","newResultCount","replaceWith","loadQuery","query","include","arguments","length","url","URL","location","href","hasTerms","searchParams","has","taxonomy","terms","split","Array","isArray","term","filter","includes","Set","set","join","toString","self","ajax","success","response","responseDocument","parseHTML","newPosts","html","window","history","pushState","decodeURIComponent","removeQuery","delete","activeTaxonomyTaxonomy","_url$searchParams$get","Number","value","name","addEventListener","event","target","taxonomySlug","dataset","menus","querySelectorAll","forEach","menu","m","classList","remove","add","filterValue","filter_value","radios","radio","checked","includedTerms","from","map","checkboxes","checkbox","currentActiveTaxonomy","tax","ctbQueryLoopBlocks","document","queryLoopBlock","queryLoopInstance","queryClass","className","startsWith","classTokens"],"sourceRoot":""}